SNY_election = {
    campaining_in_new_york_city = {
        icon = GFX_campaining_in_state

        available = {
            OR = {
                NYC = {
                    is_subject_of = SNY
                    has_full_control_of_state = 26
                    has_full_control_of_state = 27
                    has_full_control_of_state = 28
                    has_full_control_of_state = 202
                }
                AND = {
                    has_full_control_of_state = 26
                    has_full_control_of_state = 27
                    has_full_control_of_state = 28
                    has_full_control_of_state = 202
                }
            }
            OR = {
                has_completed_focus = SNY_herbet_h_lehman
                has_completed_focus = SNY_william_f_bleakey
                has_completed_focus = SNY_endorse_herbet_h_lehman
                has_completed_focus = SNY_rockwell_kent
                has_completed_focus = SNY_harry_w_laidler
                has_completed_focus = SNY_robert_minor
            }
            NOT = {
                has_country_flag = SNY_already_campaining
            }
            custom_trigger_tooltip = {
                tooltip = at_least_10_support_for_another_party_tt
                202 = {
                    count_triggers = {
                        amount = 2
                        check_variable = { state_democratic_support > 9 }
                        check_variable = { state_republican_support > 9 }
                        check_variable = { state_labor_support > 9 }
                        check_variable = { state_socialist_support > 9 }
                        check_variable = { state_communist_support > 9 }
                    }
                }
            }
            custom_trigger_tooltip = {
                tooltip = 202_check_support_tt
                always = yes
            }
        }
        days_remove = 50
        cost = 100
        highlight_state_targets = { state = 202 }
        highlight_states = {
            state = 26
            state = 27
            state = 28
            state = 202
        }
        on_map_mode = map_only
        fire_only_once = no
        visible = {
            always = yes ###while election is still going on
        }
        cancel_if_not_visible = yes

        complete_effect = {
			set_country_flag = SNY_already_campaining
        }
        remove_effect = {
            202 = {
                SNY_campaign_decision = yes
            }
            clr_country_flag = SNY_already_campaining
        }
    }
    campaining_in_downstate_new_york = {
        icon = GFX_campaining_in_state

        available = {
            AND = {
                has_full_control_of_state = 277
                has_full_control_of_state = 278
                has_full_control_of_state = 279
                has_full_control_of_state = 291
                has_full_control_of_state = 622
            }
            custom_trigger_tooltip = {
                tooltip = 277_check_support_tt
                always = yes
            }
            OR = {
                has_completed_focus = SNY_herbet_h_lehman
                has_completed_focus = SNY_william_f_bleakey
                has_completed_focus = SNY_endorse_herbet_h_lehman
                has_completed_focus = SNY_rockwell_kent
                has_completed_focus = SNY_harry_w_laidler
                has_completed_focus = SNY_robert_minor
            }
            NOT = {
                has_country_flag = SNY_already_campaining
            }
            custom_trigger_tooltip = {
                tooltip = at_least_10_support_for_another_party_tt
                277 = {
                    count_triggers = {
                        amount = 2
                        check_variable = { state_democratic_support > 9 }
                        check_variable = { state_republican_support > 9 }
                        check_variable = { state_labor_support > 9 }
                        check_variable = { state_socialist_support > 9 }
                        check_variable = { state_communist_support > 9 }
                    }
                }
            }
        }
        days_remove = 25
        cost = 25
        highlight_state_targets = { state = 277 }
        highlight_states = {
            state = 277
            state = 278
            state = 279
            state = 291
            state = 622
        }
        on_map_mode = map_only
        fire_only_once = no
        visible = {
            always = yes
        }
        cancel_if_not_visible = yes

        complete_effect = {
			set_country_flag = SNY_already_campaining
        }
        remove_effect = {
            277 = {
                SNY_campaign_decision = yes
            }
            clr_country_flag = SNY_already_campaining
        }
    }
    campaining_in_middlestate_new_york = {
        icon = GFX_campaining_in_state

        available = {
            AND = {
                has_full_control_of_state = 280
                has_full_control_of_state = 281
            }
            custom_trigger_tooltip = {
                tooltip = 280_check_support_tt
                always = yes
            }
            OR = {
                has_completed_focus = SNY_herbet_h_lehman
                has_completed_focus = SNY_william_f_bleakey
                has_completed_focus = SNY_endorse_herbet_h_lehman
                has_completed_focus = SNY_rockwell_kent
                has_completed_focus = SNY_harry_w_laidler
                has_completed_focus = SNY_robert_minor
            }
            NOT = {
                has_country_flag = SNY_already_campaining
            }
            custom_trigger_tooltip = {
                tooltip = at_least_10_support_for_another_party_tt
                280 = {
                    count_triggers = {
                        amount = 2
                        check_variable = { state_democratic_support > 9 }
                        check_variable = { state_republican_support > 9 }
                        check_variable = { state_labor_support > 9 }
                        check_variable = { state_socialist_support > 9 }
                        check_variable = { state_communist_support > 9 }
                    }
                }
            }
        }
        days_remove = 25
        cost = 25
        highlight_state_targets = { state = 280 }
        highlight_states = {
            state = 280
            state = 281
        }
        on_map_mode = map_only
        fire_only_once = no
        visible = {
            always = yes
        }
        cancel_if_not_visible = yes

        complete_effect = {
			set_country_flag = SNY_already_campaining
        }
        remove_effect = {
            280 = {
                SNY_campaign_decision = yes
            }
            clr_country_flag = SNY_already_campaining
        }
    }
    campaining_in_eaststate_new_york = {
        icon = GFX_campaining_in_state

        available = {
            AND = {
                has_full_control_of_state = 274
                has_full_control_of_state = 275
            }
            custom_trigger_tooltip = {
                tooltip = 274_check_support_tt
                always = yes
            }
            OR = {
                has_completed_focus = SNY_herbet_h_lehman
                has_completed_focus = SNY_william_f_bleakey
                has_completed_focus = SNY_endorse_herbet_h_lehman
                has_completed_focus = SNY_rockwell_kent
                has_completed_focus = SNY_harry_w_laidler
                has_completed_focus = SNY_robert_minor
            }
            NOT = {
                has_country_flag = SNY_already_campaining
            }
            custom_trigger_tooltip = {
                tooltip = at_least_10_support_for_another_party_tt
                274 = {
                    count_triggers = {
                        amount = 2
                        check_variable = { state_democratic_support > 9 }
                        check_variable = { state_republican_support > 9 }
                        check_variable = { state_labor_support > 9 }
                        check_variable = { state_socialist_support > 9 }
                        check_variable = { state_communist_support > 9 }
                    }
                }
            }
        }
        days_remove = 25
        cost = 25
        highlight_state_targets = { state = 274 }
        highlight_states = {
            state = 274
            state = 275
        }
        on_map_mode = map_only
        fire_only_once = no
        visible = {
            always = yes
        }
        cancel_if_not_visible = yes

        complete_effect = {
			set_country_flag = SNY_already_campaining
        }
        remove_effect = {
            274 = {
                SNY_campaign_decision = yes
            }
            clr_country_flag = SNY_already_campaining
        }
    }
    campaining_in_greater_buffalo_city_new_york = {
        icon = GFX_campaining_in_state

        available = {
            AND = {
                has_full_control_of_state = 29
                has_full_control_of_state = 250
                has_full_control_of_state = 272
                has_full_control_of_state = 273
            }
            custom_trigger_tooltip = {
                tooltip = 29_check_support_tt
                always = yes
            }
            OR = {
                has_completed_focus = SNY_herbet_h_lehman
                has_completed_focus = SNY_william_f_bleakey
                has_completed_focus = SNY_endorse_herbet_h_lehman
                has_completed_focus = SNY_rockwell_kent
                has_completed_focus = SNY_harry_w_laidler
                has_completed_focus = SNY_robert_minor
            }
            NOT = {
                has_country_flag = SNY_already_campaining
            }
            custom_trigger_tooltip = {
                tooltip = at_least_10_support_for_another_party_tt
                29 = {
                    count_triggers = {
                        amount = 2
                        check_variable = { state_democratic_support > 9 }
                        check_variable = { state_republican_support > 9 }
                        check_variable = { state_labor_support > 9 }
                        check_variable = { state_socialist_support > 9 }
                        check_variable = { state_communist_support > 9 }
                    }
                }
            }
        }
        days_remove = 25
        cost = 25
        highlight_state_targets = { state = 29 }
        highlight_states = {
            state = 29
            state = 250
            state = 272
            state = 273
        }
        on_map_mode = map_only
        fire_only_once = no
        visible = {
            always = yes
        }
        cancel_if_not_visible = yes

        complete_effect = {
			set_country_flag = SNY_already_campaining
        }
        remove_effect = {
            29 = {
                SNY_campaign_decision = yes
            }
            clr_country_flag = SNY_already_campaining
        }
    }
    campaining_in_upstate_new_york = {
        icon = GFX_campaining_in_state

        available = {
            AND = {
                has_full_control_of_state = 100
                has_full_control_of_state = 276
                has_full_control_of_state = 282
                has_full_control_of_state = 283
                has_full_control_of_state = 414
            }
            custom_trigger_tooltip = {
                tooltip = 276_check_support_tt
                always = yes
            }
            OR = {
                has_completed_focus = SNY_herbet_h_lehman
                has_completed_focus = SNY_william_f_bleakey
                has_completed_focus = SNY_endorse_herbet_h_lehman
                has_completed_focus = SNY_rockwell_kent
                has_completed_focus = SNY_harry_w_laidler
                has_completed_focus = SNY_robert_minor
            }
            NOT = {
                has_country_flag = SNY_already_campaining
            }
            custom_trigger_tooltip = {
                tooltip = at_least_10_support_for_another_party_tt
                276 = {
                    count_triggers = {
                        amount = 2
                        check_variable = { state_democratic_support > 9 }
                        check_variable = { state_republican_support > 9 }
                        check_variable = { state_labor_support > 9 }
                        check_variable = { state_socialist_support > 9 }
                        check_variable = { state_communist_support > 9 }
                    }
                }
            }
        }
        days_remove = 25
        cost = 25
        highlight_state_targets = { state = 276 }
        highlight_states = {
            state = 100
            state = 276
            state = 282
            state = 283
            state = 414
        }
        on_map_mode = map_only
        fire_only_once = no
        visible = {
            always = yes
        }
        cancel_if_not_visible = yes

        complete_effect = {
			set_country_flag = SNY_already_campaining
        }
        remove_effect = {
            276 = {
                SNY_campaign_decision = yes
            }
            clr_country_flag = SNY_already_campaining
        }
    }
    SNY_new_york_election = {
        icon = GFX_

        allowed = { tag = SNY }
        available = {
			hidden_trigger = { always = no }
		}
        activation = {
            always = yes
        }
        is_good = yes
        days_mission_timeout = 307
        timeout_effect = {
            custom_effect_tooltip = SNY_election_ends_tt
            hidden_effect = {
                SNY_calc_election_ends = yes
                if = {
                    limit = {
                        AND = {
                            check_variable = { 
                                var = SNY_total_democratic_support
                                value = SNY_total_republican_support 
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_democratic_support
                                value = SNY_total_labor_support 
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_democratic_support
                                value = SNY_total_socialist_support
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_democratic_support
                                value = SNY_toatl_communist_support 
                                compare = greater_than_or_equals
                            }
                        }
                    }
                    country_event = {
                        id = new_york.1
                    }
                }
                else_if = {
                    limit = {
                        AND = {
                            check_variable = { 
                                var = SNY_total_republican_support
                                value = SNY_total_democratic_support 
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_republican_support
                                value = SNY_total_labor_support 
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_republican_support
                                value = SNY_total_socialist_support
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_republican_support
                                value = SNY_toatl_communist_support 
                                compare = greater_than_or_equals
                            }
                        }
                    }
                    country_event = {
                        id = new_york.2
                    }
                }
                else_if = {
                    limit = {
                        AND = {
                            check_variable = { 
                                var = SNY_total_labor_support
                                value = SNY_total_democratic_support 
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_labor_support
                                value = SNY_total_republican_support 
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_labor_support
                                value = SNY_total_socialist_support
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_labor_support
                                value = SNY_toatl_communist_support 
                                compare = greater_than_or_equals
                            }
                        }
                    }
                    country_event = {
                        id = new_york.3
                    }
                }
                else_if = {
                    limit = {
                        AND = {
                            check_variable = { 
                                var = SNY_total_socialist_support
                                value = SNY_total_democratic_support 
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_socialist_support
                                value = SNY_total_republican_support 
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_socialist_support
                                value = SNY_total_labor_support
                                compare = greater_than_or_equals
                            }
                            check_variable = { 
                                var = SNY_total_socialist_support
                                value = SNY_toatl_communist_support 
                                compare = greater_than_or_equals
                            }
                        }
                    }
                    country_event = {
                        id = new_york.4
                    }
                }
                else = {
                    country_event = {
                        id = new_york.5
                    }
                }
            }
        }
    }
}